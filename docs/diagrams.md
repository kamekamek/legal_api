# プロジェクト管理システム - 設計図解説

## はじめに
このドキュメントでは、プロジェクト管理システムの基本的な構造と処理の流れを説明します。

## システムの全体像
このシステムは、建築プロジェクトの管理と法令チェックを支援するツールです。

### 主な機能
1. プロジェクト情報の管理
2. 法令情報の自動取得
3. 建築可能な面積の計算

## クラス図

プロジェクト管理システムのコンポーネント構成を表すクラス図です。

```mermaid
classDiagram
    class プロジェクト詳細画面 {
        +string プロジェクトID
        +string プロジェクト名
        +string 所在地
        +string ステータス
        +プロジェクト情報表示()
        +法令情報取得()
    }

    class 法令情報検索 {
        <<abstract>>
        +検索実行()
        +結果取得()
    }

    class 住所検索 {
        +string 住所
        +住所から検索()
    }

    class 地図検索 {
        +number 緯度
        +number 経度
        +地図から検索()
    }

    class 法令情報 {
        +string 用途地域
        +number 建ぺい率
        +number 容積率
        +情報表示()
        +情報更新()
    }

    class 建築計算 {
        +number 敷地面積
        +number 前面道路幅員
        +面積計算()
        +結果保存()
    }

    住所検索 --|> 法令情報検索
    地図検索 --|> 法令情報検索
    法令情報検索 --> 法令情報
    プロジェクト詳細画面 *-- 法令情報
    プロジェクト詳細画面 *-- 建築計算
```

## シーケンス図

プロジェクトでの基本的な操作の流れを表しています。

```mermaid
sequenceDiagram
    actor User as 利用者
    participant F as 画面(ブラウザ)
    participant B as サーバー
    participant DB as データベース

    %% スタイル設定
    rect rgb(240, 248, 255)
        %% プロジェクト表示フェーズ
        note right of User: 1️⃣ プロジェクト表示
        User->>+F: 画面を開く
        F->>+B: データを要求
        B->>+DB: データを検索
        DB-->>-B: データを返す
        B-->>-F: 画面に表示
        F-->>-User: 完了
    end

    rect rgb(245, 255, 250)
        %% 法令情報取得フェーズ
        note right of User: 2️⃣ 法令情報取得
        alt 住所から検索
            User->>+F: 住所を入力
            F->>B: 住所で検索
        else 地図から検索
            User->>+F: 地図をクリック
            F->>B: 座標で検索
        end
        B->>+DB: 法令情報を検索
        DB-->>-B: 情報を返す
        B-->>F: 結果を表示
        F-->>-User: 完了
    end

    rect rgb(255, 250, 250)
        %% 建築計算フェーズ
        note right of User: 3️⃣ 建築計算
        User->>+F: 計算実行
        F->>+B: 計算要求
        B->>B: 計算処理
        B-->>-F: 結果を表示
        F-->>-User: 完了
    end
```

## 処理の詳細説明

### 1. プロジェクト表示
- **目的**: プロジェクトの基本情報を確認します
- **手順**:
  1. ブラウザでプロジェクト画面を開く
  2. サーバーがデータベースから情報を取得
  3. 画面に情報を表示

### 2. 法令情報取得
- **目的**: 建築予定地の法令情報を取得します
- **取得方法**:
  - 住所から検索: 住所を入力して検索
  - 地図から検索: 地図上をクリックして検索
- **取得情報**:
  - 用途地域
  - 建ぺい率・容積率
  - その他の建築規制

### 3. 建築計算
- **目的**: 建築可能な面積を計算します
- **入力項目**:
  - 敷地面積
  - 前面道路幅員
- **計算結果**:
  - 建築可能面積
  - 延べ床面積

## 使用技術とコンポーネント
1. **フロントエンド**
   - React.js: ユーザーインターフェース
   - TailwindCSS: スタイリング

2. **バックエンド**
   - Node.js: サーバーサイド処理
   - PostgreSQL: データベース

3. **外部サービス**
   - 地図API: 位置情報の取得
   - 法令情報API: 建築規制の取得

## 開発の流れ
1. プロジェクト作成
2. 法令情報の検索
3. 計算実行
4. 結果の保存

## 次のステップ
- プロジェクトの新規作成方法
- 詳細な法令チェックの方法
- 計算結果のエクスポート
